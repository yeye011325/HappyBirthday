<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <title>Splash</title>

  <!-- Preload your GIF for a snappier first paint -->
  <link rel="preload" as="image" href="bear_heart_portrait.gif" />
  <!-- Prefetch the next page (make sure it's NOT this same file) -->
  <link rel="prefetch" href="index.html" />

  <style>
    /* Page scaffold */
    html, body { height: 100%; margin: 0; }
    body {
      background: #0b0b0b;
      color: #e6e6e6;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      overflow: hidden;
    }

    /* Stage centers the card and leaves a small margin around it */
    .stage {
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      padding: clamp(8px, 3vw, 28px);
      background: #0b0b0b;
    }

    /* The boxed container ("card") */
    .card {
      display: grid;
      grid-template-rows: auto 1fr;
      width: min(96vw, 820px);
      height: min(92vh, 1200px);
      border: 1px solid #262626;
      border-radius: 14px;
      overflow: hidden;
      background: #111;                 /* card body */
      box-shadow: 0 8px 40px rgba(0,0,0,.45);
    }

    /* Optional header like in your screenshot */
    .card-header {
      background: #141414;
      border-bottom: 1px solid #262626;
      text-align: center;
      padding: 10px 14px 8px;
    }
    .card-title {
      font-weight: 700;
      color: #ffb02e;                   /* golden accent */
      letter-spacing: .2px;
    }
    .card-sub {
      font-size: .9rem;
      color: #9b9b9b;
      margin-top: 2px;
    }

    /* Media area holds the GIF */
    .card-media {
      position: relative;
      background: #000;                  /* letterbox bars blend into page */
    }
    #splash {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;               /* show whole GIF inside the box */
      /* Want it to crop and fill instead? change to: object-fit: cover; */
      opacity: 0;
      transition: opacity .2s ease;
    }
    #splash.ready { opacity: 1; }

    /* Skip button */
    .skip {
      position: fixed;
      right: clamp(12px, 2vw, 24px);
      bottom: clamp(12px, 2vw, 24px);
      padding: .6rem .9rem;
      border: 0;
      border-radius: 999px;
      background: rgba(0,0,0,.54);
      color: #fff;
      font: 600 0.95rem/1 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      cursor: pointer;
      backdrop-filter: blur(6px);
      z-index: 5;
    }
    .skip:focus-visible { outline: 3px solid #fff; outline-offset: 2px; }

    @media (prefers-reduced-motion: reduce) {
      .skip { display: none; }
    }
  </style>
</head>

<!--
  Config (hard-coded timer):
  - data-gif: path to your GIF
  - data-next: page to go to after timer
  - data-duration: length in ms (hard-coded; querystring is ignored)
-->
<body
  data-gif="bear_heart_portrait.gif"
  data-next="index.html"
  data-duration="3700"
  aria-busy="true">

  <div class="stage">
    <div class="card" role="group" aria-label="Intro">
      <div class="card-header">
        <div class="card-title">❤Thanks for waiting ❤</div>
      </div>
      <div class="card-media">
        <img id="splash" alt="" aria-hidden="true" />
      </div>
    </div>
  </div>

  <button id="skip" class="skip" type="button" aria-label="Skip intro and continue">Skip</button>

  <noscript>
    <div style="position:fixed;inset:0;display:grid;place-items:center;background:#000;color:#fff;text-align:center;padding:2rem;">
      <p>This intro requires JavaScript. <a href="index.html" style="color:#fff;text-decoration:underline;">Continue</a></p>
    </div>
  </noscript>

  <script>
    (() => {
      const elImg   = document.getElementById('splash');
      const elSkip  = document.getElementById('skip');

      const cfgGif  = document.body.dataset.gif || 'splash.gif';
      const cfgNext = document.body.dataset.next || 'index.html';
      const cfgDur  = Number(document.body.dataset.duration) || 4000; // HARD-CODED timer

      // Prevent self-redirect loops
      const nextURL = new URL(cfgNext, location.href).href;
      const hereURL = location.href.split('#')[0];
      const isSelf  = nextURL === hereURL;

      const goNext = () => {
        if (isSelf) { console.warn('[splash] Destination equals current page; not redirecting.'); return; }
        location.replace(nextURL);
      };

      let timerId;

      // Respect reduced motion preference
      if (matchMedia('(prefers-reduced-motion: reduce)').matches) {
        goNext();
        return;
      }

      const startTimer = () => {
        elImg.classList.add('ready');
        document.body.removeAttribute('aria-busy');
        if (timerId) clearTimeout(timerId);
        timerId = setTimeout(goNext, Math.max(0, cfgDur));
      };

      const fastForward = () => { if (timerId) clearTimeout(timerId); goNext(); };
      elSkip.addEventListener('click', fastForward);

      // Load GIF and start timing once it's ready to paint
      elImg.src = cfgGif;

      if (elImg.complete) {
        if ('decode' in elImg) elImg.decode().then(startTimer).catch(startTimer);
        else startTimer();
      } else {
        elImg.addEventListener('load', () => {
          if ('decode' in elImg) elImg.decode().then(startTimer).catch(startTimer);
          else startTimer();
        }, { once: true });

        elImg.addEventListener('error', () => {
          console.error('[splash] Failed to load GIF:', cfgGif);
          fastForward(); // don’t strand the user
        }, { once: true });
      }
    })();
    //http://127.0.0.1:5500/bear.html
  </script>
</body>
</html>
